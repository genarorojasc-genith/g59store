{% extends 'base.html' %}
{% load moneda %}

{% block title %}{{ producto.nombre }}{% endblock %}
{% block content %}

<div class="grid grid-cols-1 md:grid-cols-2 gap-8">
    <div>
        {% if producto.imagen %}
            <img 
                src="{{ producto.imagen.url }}" 
                alt="{{ producto.nombre }}"
                class="w-full h-auto rounded-lg shadow"
            >
        {% else %}
            <img 
                src="https://via.placeholder.com/600x400?text=Sin+Imagen" 
                alt="{{ producto.nombre }}"
                class="w-full h-auto rounded-lg shadow"
            >
        {% endif %}
    </div>

    <div>
        <h2 class="text-2xl font-semibold text-gray-900 mb-1">
            {{ producto.nombre }}
        </h2>
        <p class="text-sm text-gray-500 mb-3">
            {{ producto.categoria.nombre }}
        </p>
        <p class="text-gray-700 mb-4">
            {{ producto.descripcion }}
        </p>
        <h4 class="text-xl font-bold text-emerald-600 mb-6">
            {{ producto.precio|formato_pesos }}
        </h4>

        {% if producto.stock > 0 %}
            <form 
                method="post" 
                action="{% url 'carrito:agregar' producto.id %}" 
                class="flex flex-wrap items-center gap-4"
            >
                {% csrf_token %}
                <div class="flex items-center gap-2">
                    <label for="quantity" class="text-sm text-gray-700">
                        Cantidad:
                    </label>
                    <input 
                        type="number" 
                        id="quantity" 
                        name="quantity" 
                        value="1" 
                        min="1"
                        max="{{ producto.stock }}"
                        class="w-24 border border-gray-300 rounded-md px-2 py-1 text-center text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
                    >
                </div>
                <button 
                    type="submit" 
                    class="inline-flex items-center px-5 py-2.5 text-sm font-medium rounded-md text-white bg-emerald-600 hover:bg-emerald-700 shadow-sm transition"
                >
                    Agregar al carrito
                </button>
            </form>
        {% else %}
            <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-gray-200 text-gray-700">
                Sin stock
            </span>
        {% endif %}
    </div>
</div>

{% endblock %}
